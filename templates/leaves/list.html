{% extends 'base.html' %}
{% block title %}Leave Management - HR EMS{% endblock %}
{% block header %}Leave Management{% endblock %}
{% block content %}
<div class="actions">
  <a class="btn" href="/leaves/request/">Request Leave</a>
</div>
<table class="table">
  <thead>
    <tr><th>Employee</th><th>Start</th><th>End</th><th>Status</th>{% if is_manager %}<th>Actions</th>{% endif %}</tr>
  </thead>
  <tbody>
    {% for l in leaves %}
      <tr>
        <td>{{ l.employee.user.get_full_name|default:l.employee.user.username }}</td>
        <td>{{ l.start_date }}</td>
        <td>{{ l.end_date }}</td>
        <td>
          {% if l.status == 'approved' %}
            <span style="color:#16a34a;font-weight:600">Approved</span>
          {% elif l.status == 'rejected' %}
            <span style="color:#dc2626;font-weight:600">Rejected</span>
          {% else %}
            <span style="color:#64748b">Pending</span>
          {% endif %}
        </td>
        {% if is_manager %}
        <td>
          <a class="btn" style="background:#16a34a;color:#fff" href="/leaves/{{ l.id }}/approve/">Approve</a>
          <a class="btn" style="background:#dc2626;color:#fff" href="/leaves/{{ l.id }}/reject/">Reject</a>
        </td>
        {% endif %}
      </tr>
    {% empty %}
      <tr><td colspan="5">No leave requests.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
